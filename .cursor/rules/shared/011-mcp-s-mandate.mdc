---
description: Force MCP-S tools for internal docs, Slack, Jira, DevEx, and observability (shared across all kits)
globs:
alwaysApply: false
---

# MCP-S Mandate üìöüí¨üé´üîß (Shared, Non-Negotiable)

## Purpose
MCP-S provides access to **internal knowledge sources** that code alone cannot reveal:
- **Internal Docs** ‚Äî architecture specs, design docs, ownership, onboarding
- **Slack** ‚Äî team discussions, decisions, debugging threads
- **Jira** ‚Äî requirements, acceptance criteria, bug reports
- **DevEx** ‚Äî code ownership, CI/CD builds, commits, releases, rollouts
- **Observability (when debugging)** ‚Äî root cause analysis + Grafana (logs/metrics/incidents/on-call)

## When MCP-S is REQUIRED (at least one source)
Run MCP-S tools as soon as any of these triggers appear:
- new service/package/SDK encountered (docs for architecture)
- unclear ownership or team responsibility (**DevEx code owners**)
- feature purpose unclear from code alone (Jira for requirements; Slack for context)
- debugging a bug/perf/deployment issue (observability + Jira/Slack + DevEx)
- generated code encountered (docs for generation pipeline)
- ‚Äúwhy was this built this way?‚Äù questions (Slack/docs)
- need CI/build status or rollout history (DevEx)

## Core Tools (most kits)

### Internal Docs (`docs-schema__search_docs`)
Use when you need architecture/design/ownership context.

### Slack Search (`slack__search-messages`)
Use when you need decisions/discussions/debugging threads.

### Jira Issues (`jira__get-issues`)
Use when you need requirements/acceptance criteria/bug context.

### DevEx (ownership + CI/CD)
Use when you need ownership, build/commit/release/rollout info:
- `code_owners_for_path`
- `get_project` / `search_projects`
- `get_build` / `search_builds`
- `get_commit_information` / `where_is_my_commit`
- `release_notes` / `available_rcs` / `get_rollout_history`
- `get_devex_fqdn`

## Observability Tools (primarily for troubleshoot/debug flows)

### Root Cause Analysis (Request ID tracing)
If you have an `x-wix-request-id`, use:
- `start_root_cause_analysis` ‚Üí then poll with `await_root_cause_analysis`
Fallback to Grafana log search only if RCA is non-informative.

### Grafana
Use when you need logs/metrics/incidents/on-call, slow requests, error patterns:
- Loki logs (`query_loki_logs`), datasource discovery (`list_datasources`)
- investigations (`find_error_pattern_logs`, `find_slow_requests`, SIFT)
- incidents/on-call (`list_incidents`, schedules/on-call users)
- Prometheus metrics (`query_prometheus`)

## What MCP-S must contribute (minimum)
For each researched topic, record:
- **Source type**: docs | Slack | Jira | DevEx | Observability
- **Query used**: exact search terms or arguments
- **Key findings**: ownership/decisions/requirements/status/links/IDs

## Logging requirement
Append MCP-S queries + findings to the kit‚Äôs evidence artifact (kit-specific).

Examples:
- deep-search: `.cursor/deep-search/<feature>/mcp-s-notes.md`
- troubleshoot: `.cursor/troubleshoot/<topic>/mcp-s-notes.md`

If MCP-S is unavailable or yields no results:
- mark as **MCP-S: NOT FOUND**
- list exact queries attempted + which sources were searched

