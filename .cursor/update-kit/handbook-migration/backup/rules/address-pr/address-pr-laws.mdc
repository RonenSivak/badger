---
description: Laws enforced during /address-pr runs
globs: ".cursor/commands/address-pr/**, .cursor/address-pr/**"
alwaysApply: false
---

# Address-PR Laws

## Shared references (passive context)
- `@.cursor/rules/shared/proof-discipline.mdc`
- `@.cursor/rules/shared/octocode-mandate.mdc`
- `@.cursor/rules/shared/mcp-s-mandate.mdc`

## Core Prohibition — Git Read-Only Mode

**NEVER perform git write operations.** This includes:
- `git commit` — FORBIDDEN
- `git push` — FORBIDDEN
- `gh pr comment` — FORBIDDEN
- `gh pr review` — FORBIDDEN
- Any action that modifies git history or PR state

**ALLOWED git operations** (read-only):
- `git status`, `git log`, `git diff` — OK
- `gh api` for fetching data — OK
- `gh pr view` — OK

## Address ALL Comments

**Every comment MUST be addressed** — no exceptions. After user specifies the PR:
- Each comment gets a status: `FIX` or `RESPONSE`
- There is no "non-actionable" — praise/questions still need a response suggestion

## Workflow Gates

1. **Fetch before triage**: Must run `gh api` to fetch comments before classification
2. **Triage before analyze**: Classification must complete before deep analysis
3. **Analyze before plan**: Analysis must complete before action planning
4. **Verify before publish**: VERIFICATION.md must show PASS before publishing

## Proof Requirements

- **Every claim has evidence**: file + line + snippet
- **Cross-repo symbols**: Octocode proof mandatory (see shared mandate)
- **Static analysis claims**: Must be verifiable via ESLint/TSC

## Output Format — Summary Table

Final output MUST include a markdown table:

| # | Comment | Status | Solution |
|---|---------|--------|----------|
| 1 | {comment summary} | FIX | {file:line + change description} |
| 2 | {comment summary} | RESPONSE | {suggested reply text} |

## Output Discipline

- All artifacts go to `.cursor/address-pr/<pr-number>/`
- Each step produces its designated output file
- Do not overwrite previous step outputs without reason

## Hard-fail Conditions

- Publishing without verify pass
- **Any git write operation** (commit, push, pr comment, pr review)
- Non-local symbols without Octocode proof
- Skipping workflow steps
- Leaving any comment unaddressed
